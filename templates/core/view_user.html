{% extends 'base.html' %}
{% load static %}

{% block title %}Manage Users{% endblock title %}

{% block links %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock links %}


{% block content %}
{% include 'partials/head.html' %}

<div class="container py-4">
    <div class="card mb-4">
        <div class="card-body">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item">
                        <a href="{% url 'admin_dashboard' %}" class="text-decoration-none">Admin Dashboard</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="{% url 'manage_user' %}" class="text-decoration-none">Manage Users</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">User Detail</li>
                </ol>
            </nav>
        </div>
    </div>
    <div class="card mb-4">
        <div class="card-body d-flex flex-wrap justify-content-between align-items-center gap-3">
            <div>
                <h4 class="mb-1">User: {{ viewed_user.first_name }} {{ viewed_user.last_name }}</h4>
                <p class="text-muted mb-0">Email: {{ viewed_user.email }}</p>
            </div>
            <a href="{% url 'export_user_activities' viewed_user.id %}" class="btn btn-primary">
                Export to Excel
            </a>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <span class="fw-semibold">Activities</span>
        </div>
        <div class="card-body">
            {% if activities %}
                <ul class="list-group">
                    {% for activity in activities %}
                        <li class="list-group-item">
                            <strong>{{ activity.activity }}</strong><br>
                            Duration: {{ activity.duration }}<br>
                            Date: {{ activity.date }}<br>
                            {% if activity.feedback %}
                                Feedback: {{ activity.feedback }}
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted mb-0">No activities found for this user.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
